<view class="page-container">
  <view class="header-bar">
    <text class="page-title">è´¢åŠ¡ç®¡ç†</text>
    <view class="header-actions">
      <view class="notification-btn" bindtap="showNotifications">
        <text class="notification-icon">ğŸ””</text>
        <view class="badge" wx:if="{{notificationCount > 0}}">{{notificationCount}}</view>
      </view>
    </view>
  </view>

  <scroll-view class="content-scroll" scroll-y>
    <view class="content-wrapper">
      <view class="status-cards">
        <view class="status-card invoice">
          <view class="card-icon-wrapper">
            <text class="card-icon">ğŸ§¾</text>
          </view>
          <view class="card-content">
            <text class="card-label">å¾…å¤„ç†å‘ç¥¨</text>
            <text class="card-value">{{pendingInvoices}}</text>
          </view>
          <view class="card-arrow">â†’</view>
        </view>
        <view class="status-card tax">
          <view class="card-icon-wrapper">
            <text class="card-icon">ğŸ“‹</text>
          </view>
          <view class="card-content">
            <text class="card-label">å¾…ç”³æŠ¥ç¨ç§</text>
            <text class="card-value">{{pendingTaxes}}</text>
          </view>
          <view class="card-arrow">â†’</view>
        </view>
        <view class="status-card data">
          <view class="card-icon-wrapper">
            <text class="card-icon">ğŸ”—</text>
          </view>
          <view class="card-content">
            <text class="card-label">å¾…åŒæ­¥æ•°æ®</text>
            <text class="card-value">{{pendingDataSync}}</text>
          </view>
          <view class="card-arrow">â†’</view>
        </view>
      </view>

      <view class="functions-section">
        <view class="section-header">
          <text class="section-title">è´¢åŠ¡åŠŸèƒ½</text>
        </view>
        <view class="functions-grid">
          <navigator url="/pages/invoice/index" class="function-card">
            <view class="function-icon-wrapper invoice">
              <text class="function-icon">ğŸ§¾</text>
            </view>
            <text class="function-label">å‘ç¥¨ç®¡ç†</text>
            <text class="function-desc">æ™ºèƒ½è¯†åˆ«å½•å…¥</text>
          </navigator>
          <navigator url="/pages/finance/tax" class="function-card">
            <view class="function-icon-wrapper tax">
              <text class="function-icon">ğŸ“‹</text>
            </view>
            <text class="function-label">ç¨åŠ¡ç”³æŠ¥</text>
            <text class="function-desc">ä¸€é”®æŠ¥ç¨</text>
          </navigator>
          <navigator url="/pages/finance/data-connection" class="function-card">
            <view class="function-icon-wrapper data">
              <text class="function-icon">ğŸ”—</text>
            </view>
            <text class="function-label">æ•°æ®å¯¹æ¥</text>
            <text class="function-desc">è‡ªåŠ¨åŒæ­¥</text>
          </navigator>
          <navigator url="/pages/finance/bank" class="function-card">
            <view class="function-icon-wrapper bank">
              <text class="function-icon">ğŸ¦</text>
            </view>
            <text class="function-label">é“¶è¡Œå¯¹è´¦</text>
            <text class="function-desc">æ™ºèƒ½å¯¹è´¦</text>
          </navigator>
          <navigator url="/pages/finance/voucher" class="function-card">
            <view class="function-icon-wrapper voucher">
              <text class="function-icon">ğŸ“</text>
            </view>
            <text class="function-label">å‡­è¯ç®¡ç†</text>
            <text class="function-desc">è‡ªåŠ¨ç”Ÿæˆ</text>
          </navigator>
          <navigator url="/pages/finance/report" class="function-card">
            <view class="function-icon-wrapper report">
              <text class="function-icon">ğŸ“Š</text>
            </view>
            <text class="function-label">è´¢åŠ¡æŠ¥è¡¨</text>
            <text class="function-desc">ä¸€é”®ç”Ÿæˆ</text>
          </navigator>
        </view>
      </view>

      <view class="tasks-section">
        <view class="section-header">
          <text class="section-title">è¿‘æœŸä»»åŠ¡</text>
          <view class="more-link" bindtap="viewAllTasks">æŸ¥çœ‹å…¨éƒ¨</view>
        </view>
        <view class="tasks-list">
          <view class="task-row" wx:for="{{tasks}}" wx:key="index">
            <view class="task-icon">{{item.icon}}</view>
            <view class="task-info">
              <text class="task-title">{{item.title}}</text>
              <text class="task-deadline">æˆªæ­¢ï¼š{{item.deadline}}</text>
            </view>
            <view class="task-status {{item.status}}">
              <text>{{item.statusText}}</text>
            </view>
          </view>
          <view class="empty-state" wx:if="{{tasks.length === 0}}">
            <text class="empty-text">æš‚æ— ä»»åŠ¡</text>
          </view>
        </view>
      </view>

      <view class="stats-section">
        <view class="section-header">
          <text class="section-title">æ•°æ®ç»Ÿè®¡</text>
          <view class="period-selector" bindtap="openStatsFilter">
            <text class="period-text">{{currentStatsPeriod}}</text>
            <text class="period-arrow">â–¼</text>
          </view>
        </view>
        <view class="stats-grid">
          <view class="stat-item">
            <text class="stat-label">å‘ç¥¨æ•°é‡</text>
            <text class="stat-value">{{invoiceCount}}</text>
            <view class="stat-trend {{invoiceChange >= 0 ? 'up' : 'down'}}">
              <text>{{invoiceChange >= 0 ? 'â†‘' : 'â†“'}}</text>
              <text>{{Math.abs(invoiceChange)}}%</text>
            </view>
          </view>
          <view class="stat-item">
            <text class="stat-label">ç”³æŠ¥ç¨ç§</text>
            <text class="stat-value">{{taxCount}}</text>
            <view class="stat-trend {{taxChange >= 0 ? 'up' : 'down'}}">
              <text>{{taxChange >= 0 ? 'â†‘' : 'â†“'}}</text>
              <text>{{Math.abs(taxChange)}}%</text>
            </view>
          </view>
          <view class="stat-item">
            <text class="stat-label">åŒæ­¥æ•°æ®</text>
            <text class="stat-value">{{syncCount}}</text>
            <view class="stat-trend {{syncChange >= 0 ? 'up' : 'down'}}">
              <text>{{syncChange >= 0 ? 'â†‘' : 'â†“'}}</text>
              <text>{{Math.abs(syncChange)}}%</text>
            </view>
          </view>
        </view>
      </view>
    </view>
  </scroll-view>
</view>
