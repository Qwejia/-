<!-- pages/generalLedger/accountTransactions.wxml -->
<view class="container">
  <!-- æœç´¢æ  -->
  <view class="search-section">
    <view class="search-box">
      <text class="search-icon">ğŸ”</text>
      <input type="text" placeholder="æœç´¢å‡­è¯å·æˆ–æ‘˜è¦" value="{{searchKeyword}}" bindinput="onSearch" class="search-input" />
    </view>
  </view>
  
  <!-- ç­›é€‰æ¡ä»¶ -->
  <view class="filter-section">
    <view class="filter-row">
      <view class="filter-item">
        <text class="label">å¼€å§‹æ—¥æœŸ</text>
        <picker mode="date" value="{{dateRange.start}}" bindchange="onStartDateChange" class="picker">
          <view class="picker-text">{{dateRange.start || 'é€‰æ‹©æ—¥æœŸ'}}</view>
        </picker>
      </view>
      <view class="filter-item">
        <text class="label">ç»“æŸæ—¥æœŸ</text>
        <picker mode="date" value="{{dateRange.end}}" bindchange="onEndDateChange" class="picker">
          <view class="picker-text">{{dateRange.end || 'é€‰æ‹©æ—¥æœŸ'}}</view>
        </picker>
      </view>
    </view>
    <view class="filter-row">
      <view class="filter-item">
        <text class="label">äº¤æ˜“ç±»å‹</text>
        <picker mode="selector" range="{{typeOptions}}" range-key="text" value="{{typeFilter}}" bindchange="onTypeChange" class="picker">
          <view class="picker-text">{{typeOptions[typeFilter].text}}</view>
        </picker>
      </view>
      <view class="reset-btn">
        <button type="default" bindtap="resetFilters" size="mini">é‡ç½®ç­›é€‰</button>
      </view>
    </view>
  </view>
  
  <!-- ç§‘ç›®ä¿¡æ¯ -->
  <view class="account-info">
    <text class="account-code">{{account.code}}</text>
    <text class="account-name">{{account.name}}</text>
  </view>
  
  <!-- äº¤æ˜“åˆ—è¡¨ -->
  <view class="transactions-section">
    <view class="section-header">
      <text class="title">äº¤æ˜“è®°å½•</text>
      <text class="count">({{filteredTransactions.length}})</text>
    </view>
    
    <view class="transactions-list">
      <view wx:for="{{filteredTransactions}}" wx:key="_id" class="transaction-item" bindtap="viewVoucherDetail" data-id="{{item.voucherId}}">
        <view class="transaction-date">{{item.date}}</view>
        <view class="transaction-content">
          <view class="transaction-info">
            <text class="transaction-description">{{item.description}}</text>
            <text class="transaction-voucher">{{item.voucherNumber}}</text>
          </view>
          <view class="transaction-amount">
            <text class="amount {{item.type === 'debit' ? 'debit' : 'credit'}}">
              {{item.type === 'debit' ? '+' : '-'}}Â¥{{item.amount.toFixed(2)}}
            </text>
          </view>
        </view>
      </view>
      
      <view wx:if="filteredTransactions.length === 0" class="empty-state">
        <text class="empty-text">æš‚æ— äº¤æ˜“è®°å½•</text>
      </view>
    </view>
  </view>
</view>