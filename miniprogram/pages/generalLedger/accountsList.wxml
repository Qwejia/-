<!-- pages/generalLedger/accountsList.wxml -->
<view class="container">
  <!-- æœç´¢æ  -->
  <view class="search-section">
    <view class="search-box">
      <text class="search-icon">ğŸ”</text>
      <input type="text" placeholder="æœç´¢ä¼šè®¡ç§‘ç›®" value="{{searchKeyword}}" bindinput="onSearch" class="search-input" />
    </view>
  </view>
  
  <!-- ç­›é€‰æ¡ä»¶ -->
  <view class="filter-section">
    <view class="filter-row">
      <view class="filter-item">
        <text class="label">ç§‘ç›®ç±»åˆ«</text>
        <picker mode="selector" range="{{categoryOptions}}" range-key="text" value="{{categoryFilter}}" bindchange="onCategoryChange" class="picker">
          <view class="picker-text">{{categoryOptions[categoryFilter].text}}</view>
        </picker>
      </view>
      <view class="filter-item">
        <text class="label">ç§‘ç›®çº§æ¬¡</text>
        <picker mode="selector" range="{{levelOptions}}" range-key="text" value="{{levelFilter}}" bindchange="onLevelChange" class="picker">
          <view class="picker-text">{{levelOptions[levelFilter].text}}</view>
        </picker>
      </view>
    </view>
    <view class="reset-btn">
      <button type="default" bindtap="resetFilters" size="mini">é‡ç½®ç­›é€‰</button>
    </view>
  </view>
  
  <!-- ä¼šè®¡ç§‘ç›®åˆ—è¡¨ -->
  <view class="accounts-section">
    <view class="section-header">
      <text class="title">ä¼šè®¡ç§‘ç›®åˆ—è¡¨</text>
      <text class="count">({{filteredAccounts.length}})</text>
    </view>
    
    <view class="accounts-list">
      <view wx:for="{{filteredAccounts}}" wx:key="_id" class="account-item" bindtap="viewAccountDetail" data-id="{{item._id}}">
        <view class="account-info">
          <view class="account-code-name">
            <text class="account-code">{{item.code}}</text>
            <text class="account-name">{{item.name}}</text>
          </view>
          <text class="account-category">{{item.categoryName}}</text>
        </view>
        <view class="account-details">
          <view class="detail-item">
            <text class="label">çº§æ¬¡</text>
            <text class="value">{{item.level}}</text>
          </view>
          <view class="detail-item">
            <text class="label">è¾…åŠ©æ ¸ç®—</text>
            <text class="value">{{item.auxAccountingText || 'æ— '}}</text>
          </view>
          <view class="detail-item">
            <text class="label">ä½™é¢æ–¹å‘</text>
            <text class="value">{{item.balanceDirection === 'debit' ? 'å€Ÿæ–¹' : 'è´·æ–¹'}}</text>
          </view>
        </view>
      </view>
      
      <view wx:if="filteredAccounts.length === 0" class="empty-state">
        <text class="empty-text">æš‚æ— ä¼šè®¡ç§‘ç›®æ•°æ®</text>
      </view>
    </view>
  </view>
  
  <!-- æ–°å¢æŒ‰é’® -->
  <view class="add-button">
    <button type="primary" bindtap="addAccount" class="btn">+ æ–°å¢ç§‘ç›®</button>
  </view>
</view>