<view class="container">
  <!-- 操作栏 -->
  <view class="action-bar">
    <text class="page-title">物料清单</text>
    <button class="export-btn" bindtap="exportBOM">导出</button>
  </view>

  <!-- 加载状态 -->
  <view wx:if="{{loading}}" class="loading">
    <text>加载中...</text>
  </view>

  <!-- 物料清单列表 -->
  <view wx:else class="bom-list">
    <view 
      wx:for="{{billOfMaterials}}" 
      wx:key="bomNumber"
      class="bom-item"
      data-bom-id="{{item._id}}"
      bindtap="viewBOMDetail"
    >
      <view class="bom-header">
        <view class="bom-number">{{item.bomNumber}}</view>
        <view class="bom-product">{{item.productName}}</view>
      </view>
      <view class="bom-body">
        <view class="bom-items">
          <text class="items-label">物料数量:</text>
          <text class="items-value">{{item.items.length}} 项</text>
        </view>
        <view class="bom-status">
          <text class="status-tag" style="background-color: {{item.status === 'active' ? '#e8f5e9' : '#ffebee'}}; color: {{item.status === 'active' ? '#2e7d32' : '#c62828'}};">{{item.status === 'active' ? '生效' : '无效'}}</text>
        </view>
      </view>
      <view class="bom-footer">
        <text class="bom-info">点击查看详情</text>
      </view>
    </view>

    <!-- 空状态 -->
    <view wx:if="{{billOfMaterials.length === 0}}" class="empty-state">
      <text>暂无物料清单</text>
    </view>
  </view>
</view>