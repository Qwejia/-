<!--pages/ai-assistant/risk-warning.wxml-->
<view class="risk-warning-page">
  <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
  <view class="nav-bar">
    <view class="nav-left" bindtap="navigateBack">
      <text class="back-icon">â†</text>
      <text class="nav-title">é£é™©é¢„è­¦</text>
    </view>
    <view class="nav-right" bindtap="showHelp">
      <text class="help-icon">?</text>
    </view>
  </view>

  <!-- é£é™©çŠ¶æ€æ¦‚è§ˆ -->
  <view class="risk-overview">
    <view class="overview-header">
      <text class="overview-title">é£é™©çŠ¶æ€</text>
      <text class="overview-date">{{currentDate}}</text>
    </view>
    <view class="risk-level" wx:if="riskLevel === 'high'">
      <text class="level-icon high">âš ï¸</text>
      <text class="level-text high">é«˜é£é™©</text>
      <text class="level-desc">å­˜åœ¨ä¸¥é‡çš„ç¨åŠ¡æˆ–è´¢åŠ¡é£é™©ï¼Œéœ€è¦ç«‹å³å¤„ç†</text>
    </view>
    <view class="risk-level" wx:elif="riskLevel === 'medium'">
      <text class="level-icon medium">âš ï¸</text>
      <text class="level-text medium">ä¸­é£é™©</text>
      <text class="level-desc">å­˜åœ¨ä¸€å®šçš„é£é™©ï¼Œå»ºè®®åŠæ—¶å…³æ³¨å’Œå¤„ç†</text>
    </view>
    <view class="risk-level" wx:else>
      <text class="level-icon low">âœ…</text>
      <text class="level-text low">ä½é£é™©</text>
      <text class="level-desc">é£é™©è¾ƒä½ï¼Œå»ºè®®å®šæœŸæ£€æŸ¥å’Œç»´æŠ¤</text>
    </view>
  </view>

  <!-- é£é™©é¢„è­¦åˆ—è¡¨ -->
  <view class="warning-list">
    <view class="list-header">
      <text class="list-title">é£é™©é¢„è­¦</text>
      <text class="list-count">{{warnings.length}} æ¡</text>
    </view>
    <view class="warning-items">
      <view 
        class="warning-item" 
        wx:for="{{warnings}}" 
        wx:key="id"
        data-id="{{item.id}}"
        bindtap="showWarningDetail"
      >
        <view class="warning-left">
          <view class="warning-icon {{item.level}}">{{item.icon}}</view>
          <view class="warning-info">
            <text class="warning-title">{{item.title}}</text>
            <text class="warning-desc">{{item.description}}</text>
            <text class="warning-date">{{item.date}}</text>
          </view>
        </view>
        <view class="warning-right">
          <text class="warning-status {{item.status}}">{{item.statusText}}</text>
          <text class="arrow">â†’</text>
        </view>
      </view>
    </view>
  </view>

  <!-- é£é™©è¯„ä¼°å·¥å…· -->
  <view class="assessment-tools">
    <text class="tools-title">é£é™©è¯„ä¼°å·¥å…·</text>
    <view class="tools-grid">
      <view class="tool-item" bindtap="startTaxAssessment">
        <text class="tool-icon">ğŸ“‹</text>
        <text class="tool-text">ç¨åŠ¡é£é™©è¯„ä¼°</text>
      </view>
      <view class="tool-item" bindtap="startFinancialAssessment">
        <text class="tool-icon">ğŸ’°</text>
        <text class="tool-text">è´¢åŠ¡é£é™©è¯„ä¼°</text>
      </view>
      <view class="tool-item" bindtap="startComplianceAssessment">
        <text class="tool-icon">âœ…</text>
        <text class="tool-text">åˆè§„æ€§è¯„ä¼°</text>
      </view>
      <view class="tool-item" bindtap="generateReport">
        <text class="tool-icon">ğŸ“Š</text>
        <text class="tool-text">ç”Ÿæˆé£é™©æŠ¥å‘Š</text>
      </view>
    </view>
  </view>

  <!-- é£é™©è¯¦æƒ…æ¨¡æ€æ¡† -->
  <view class="modal" wx:if="showDetailModal" bindtap="closeDetailModal">
    <view class="modal-content" catchtap="catchTap">
      <view class="modal-header">
        <text class="modal-title">{{selectedWarning.title}}</text>
        <text class="modal-close" bindtap="closeDetailModal">Ã—</text>
      </view>
      <view class="modal-body">
        <view class="detail-item">
          <text class="detail-label">é£é™©ç­‰çº§ï¼š</text>
          <text class="detail-value {{selectedWarning.level}}">{{selectedWarning.levelText}}</text>
        </view>
        <view class="detail-item">
          <text class="detail-label">å‘ç°æ—¶é—´ï¼š</text>
          <text class="detail-value">{{selectedWarning.date}}</text>
        </view>
        <view class="detail-item">
          <text class="detail-label">é£é™©æè¿°ï¼š</text>
          <text class="detail-value desc">{{selectedWarning.description}}</text>
        </view>
        <view class="detail-item">
          <text class="detail-label">å½±å“èŒƒå›´ï¼š</text>
          <text class="detail-value">{{selectedWarning.impact}}</text>
        </view>
        <view class="detail-item">
          <text class="detail-label">å»ºè®®æªæ–½ï¼š</text>
          <text class="detail-value desc">{{selectedWarning.suggestion}}</text>
        </view>
      </view>
      <view class="modal-footer">
        <button class="footer-btn primary" bindtap="handleWarning">ç«‹å³å¤„ç†</button>
        <button class="footer-btn secondary" bindtap="closeDetailModal">å…³é—­</button>
      </view>
    </view>
  </view>
</view>