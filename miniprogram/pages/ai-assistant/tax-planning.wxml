<!--pages/ai-assistant/tax-planning.wxml-->
<view class="container">
  <!-- å¯¼èˆªæ  -->
  <view class="navbar">
    <view class="navbar-left">
      <text class="back-btn" bindtap="navigateBack">â†</text>
    </view>
    <view class="navbar-center">
      <text class="navbar-title">ç¨åŠ¡ç­¹åˆ’</text>
    </view>
    <view class="navbar-right">
      <text class="help-btn" bindtap="showHelp">?</text>
    </view>
  </view>
  
  <!-- é¡µé¢å†…å®¹ -->
  <view class="content">
    <!-- ç¨åŠ¡ç­¹åˆ’å·¥å…·åŒºåŸŸ -->
    <view class="planning-tools">
      <!-- ç¨é¢è®¡ç®—å™¨ -->
      <view class="tool-card">
        <view class="tool-header">
          <text class="tool-icon">ğŸ§®</text>
          <text class="tool-title">ç¨é¢è®¡ç®—å™¨</text>
        </view>
        <view class="tool-content">
          <view class="form-group">
            <text class="form-label">è®¡ç®—ç±»å‹</text>
            <picker bindchange="bindTaxTypeChange" value="{{taxTypeIndex}}" range="{{taxTypes}}" class="form-picker">
              <view class="picker-view">{{taxTypes[taxTypeIndex]}}</view>
            </picker>
          </view>
          <view class="form-group">
            <text class="form-label">é‡‘é¢</text>
            <input type="number" placeholder="è¯·è¾“å…¥é‡‘é¢" bindinput="bindAmountInput" value="{{amount}}" class="form-input" />
          </view>
          <view class="form-group" wx:if="taxTypeIndex === 0">
            <text class="form-label">ç¨ç‡(%)</text>
            <input type="number" placeholder="è¯·è¾“å…¥ç¨ç‡" bindinput="bindRateInput" value="{{rate}}" class="form-input" />
          </view>
          <button class="calculate-btn" bindtap="calculateTax">è®¡ç®—ç¨é¢</button>
          <view class="result-container" wx:if="showResult">
            <text class="result-label">è®¡ç®—ç»“æœ</text>
            <text class="result-value">Â¥{{calculatedTax}}</text>
            <text class="result-detail">{{resultDetail}}</text>
          </view>
        </view>
      </view>
      
      <!-- ç¨åŠ¡ç­¹åˆ’å»ºè®® -->
      <view class="tool-card">
        <view class="tool-header">
          <text class="tool-icon">ğŸ’¡</text>
          <text class="tool-title">æ™ºèƒ½ç¨åŠ¡å»ºè®®</text>
        </view>
        <view class="tool-content">
          <view class="form-group">
            <text class="form-label">ä¼ä¸šç±»å‹</text>
            <picker bindchange="bindCompanyTypeChange" value="{{companyTypeIndex}}" range="{{companyTypes}}" class="form-picker">
              <view class="picker-view">{{companyTypes[companyTypeIndex]}}</view>
            </picker>
          </view>
          <view class="form-group">
            <text class="form-label">å¹´è¥ä¸šé¢</text>
            <input type="number" placeholder="è¯·è¾“å…¥å¹´è¥ä¸šé¢" bindinput="bindRevenueInput" value="{{revenue}}" class="form-input" />
          </view>
          <button class="suggest-btn" bindtap="generateSuggestions">è·å–å»ºè®®</button>
          <view class="suggestions-container" wx:if="showSuggestions">
            <text class="suggestions-title">ç¨åŠ¡ç­¹åˆ’å»ºè®®</text>
            <view class="suggestion-item" wx:for="{{suggestions}}" wx:key="index">
              <text class="suggestion-icon">{{item.icon}}</text>
              <text class="suggestion-text">{{item.text}}</text>
            </view>
          </view>
        </view>
      </view>
      
      <!-- ç¨æ”¶ä¼˜æƒ æ”¿ç­– -->
      <view class="tool-card">
        <view class="tool-header">
          <text class="tool-icon">ğŸ“‹</text>
          <text class="tool-title">ç¨æ”¶ä¼˜æƒ æ”¿ç­–</text>
        </view>
        <view class="tool-content">
          <view class="policy-list">
            <view class="policy-item" wx:for="{{taxPolicies}}" wx:key="index">
              <text class="policy-title">{{item.title}}</text>
              <text class="policy-tag">{{item.tag}}</text>
              <text class="policy-date">{{item.date}}</text>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>
</view>