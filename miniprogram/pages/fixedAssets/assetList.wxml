<!-- èµ„äº§åˆ—è¡¨é¡µé¢ -->
<view class="container">
  <view class="list-header">
    <text class="list-title">èµ„äº§åˆ—è¡¨</text>
    <text class="list-subtitle">ç®¡ç†æ‰€æœ‰å›ºå®šèµ„äº§</text>
  </view>

  <!-- æœç´¢å’Œç­›é€‰ -->
  <view class="filter-section">
    <view class="search-box">
      <input 
        type="text" 
        class="search-input" 
        placeholder="æœç´¢èµ„äº§åç§°æˆ–æè¿°" 
        bindinput="handleSearchInput"
      />
      <text class="search-icon">ğŸ”</text>
    </view>

    <view class="filter-row">
      <view class="filter-item">
        <text class="filter-label">èµ„äº§ç±»åˆ«</text>
        <picker 
          mode="selector" 
          range="{{categories}}" 
          value="{{categoryFilter}}" 
          bindchange="handleCategoryChange"
          class="filter-picker"
        >
          <view class="picker-text">{{categoryFilter || 'å…¨éƒ¨'}}</view>
        </picker>
      </view>

      <view class="filter-item">
        <text class="filter-label">èµ„äº§çŠ¶æ€</text>
        <picker 
          mode="selector" 
          range="{{statuses}}" 
          value="{{statusFilter}}" 
          bindchange="handleStatusChange"
          class="filter-picker"
        >
          <view class="picker-text">{{statusFilter || 'å…¨éƒ¨'}}</view>
        </picker>
      </view>
    </view>

    <view class="sort-section">
      <text class="sort-label">æ’åºæ–¹å¼</text>
      <picker 
        mode="selector" 
        range="['åˆ›å»ºæ—¶é—´', 'èµ„äº§åç§°', 'èµ„äº§åŸå€¼', 'è´­ä¹°æ—¥æœŸ']" 
        value="{{sortBy}}" 
        bindchange="handleSortChange"
        class="sort-picker"
      >
        <view class="picker-text">
          {{sortBy === 'createdAt' ? 'åˆ›å»ºæ—¶é—´' : sortBy === 'name' ? 'èµ„äº§åç§°' : sortBy === 'originalValue' ? 'èµ„äº§åŸå€¼' : 'è´­ä¹°æ—¥æœŸ'}} {{sortOrder === 'asc' ? 'â†‘' : 'â†“'}}
        </view>
      </picker>
    </view>
  </view>

  <!-- èµ„äº§åˆ—è¡¨ -->
  <view class="asset-list">
    <view wx:for="{{filteredAssets}}" wx:key="_id" class="asset-card" bindtap="goToAssetDetail" data-asset-id="{{item._id}}">
      <view class="asset-header">
        <text class="asset-name">{{item.name}}</text>
        <text class="asset-status {{item.status === 'inUse' ? 'status-in-use' : item.status === 'idle' ? 'status-idle' : item.status === 'scrapped' ? 'status-scrapped' : 'status-sold'}}">
          {{item.status === 'inUse' ? 'åœ¨ç”¨' : item.status === 'idle' ? 'é—²ç½®' : item.status === 'scrapped' ? 'æŠ¥åºŸ' : 'å‡ºå”®'}}
        </text>
      </view>

      <view class="asset-info">
        <view class="info-row">
          <text class="info-label">èµ„äº§ç±»åˆ«:</text>
          <text class="info-value">{{item.category}}</text>
        </view>
        <view class="info-row">
          <text class="info-label">åŸå€¼:</text>
          <text class="info-value">Â¥{{item.originalValue}}</text>
        </view>
        <view class="info-row">
          <text class="info-label">ç´¯è®¡æŠ˜æ—§:</text>
          <text class="info-value">Â¥{{item.accumulatedDepreciation}}</text>
        </view>
        <view class="info-row">
          <text class="info-label">å‡€å€¼:</text>
          <text class="info-value">Â¥{{item.netValue}}</text>
        </view>
        <view class="info-row">
          <text class="info-label">è´­ä¹°æ—¥æœŸ:</text>
          <text class="info-value">{{item.purchaseDate}}</text>
        </view>
        <view class="info-row" wx:if="item.department">
          <text class="info-label">ä½¿ç”¨éƒ¨é—¨:</text>
          <text class="info-value">{{item.department}}</text>
        </view>
        <view class="info-row" wx:if="item.location">
          <text class="info-label">å­˜æ”¾åœ°ç‚¹:</text>
          <text class="info-value">{{item.location}}</text>
        </view>
      </view>

      <view class="asset-footer">
        <text class="asset-description">{{item.description || 'æ— æè¿°'}}</text>
      </view>
    </view>

    <view wx:if="filteredAssets.length === 0" class="empty-state">
      <text class="empty-icon">ğŸ“¦</text>
      <text class="empty-text">æš‚æ— èµ„äº§æ•°æ®</text>
      <button class="add-asset-btn" bindtap="goToAssetAdd">æ·»åŠ èµ„äº§</button>
    </view>
  </view>

  <!-- åº•éƒ¨æ“ä½œæ  -->
  <view class="bottom-bar">
    <button class="bar-btn add-btn" bindtap="goToAssetAdd">
      <text class="btn-icon">â•</text>
      <text class="btn-text">æ–°å¢èµ„äº§</text>
    </button>
    <button class="bar-btn depreciate-btn" bindtap="goToDepreciation">
      <text class="btn-icon">ğŸ“‰</text>
      <text class="btn-text">æŠ˜æ—§è®¡æ</text>
    </button>
  </view>
</view>