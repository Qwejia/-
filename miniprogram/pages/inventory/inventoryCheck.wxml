<view class="container">
  <!-- 日期选择 -->
  <view class="date-bar">
    <picker mode="date" value="{{selectedDate}}" bindchange="bindDateChange" class="date-picker">
      <view class="picker-view">
        <text>盘点日期: {{selectedDate}}</text>
      </view>
    </picker>
  </view>

  <!-- 加载状态 -->
  <view wx:if="{{loading}}" class="loading">
    <text>加载中...</text>
  </view>

  <!-- 盘点列表 -->
  <view wx:else class="inventory-check-list">
    <view 
      wx:for="{{inventoryItems}}" 
      wx:key="productId"
      class="inventory-check-item"
    >
      <view class="inventory-info">
        <view class="product-name">{{item.productName}}</view>
        <view class="product-spec">{{item.spec}}</view>
      </view>
      <view class="inventory-stats">
        <view class="stock-item">
          <text class="stock-label">系统库存:</text>
          <text class="stock-value">{{item.stock}} {{item.unit}}</text>
        </view>
        <view class="stock-item">
          <text class="stock-label">实际库存:</text>
          <input 
            class="stock-input" 
            type="number" 
            value="{{item.actualStock}}"
            data-index="{{index}}"
            bindinput="updateActualStock"
          />
        </view>
        <view class="stock-item">
          <text class="stock-label">差异:</text>
          <text class="difference-value" style="color: {{item.difference > 0 ? '#2e7d32' : item.difference < 0 ? '#c62828' : '#666'}};">
            {{item.difference > 0 ? '+' : ''}}{{item.difference}} {{item.unit}}
          </text>
        </view>
      </view>
    </view>

    <!-- 空状态 -->
    <view wx:if="{{inventoryItems.length === 0}}" class="empty-state">
      <text>暂无库存数据</text>
    </view>
  </view>

  <!-- 操作按钮 -->
  <view class="action-buttons">
    <button class="submit-btn" bindtap="submitInventoryCheck">提交盘点</button>
    <button class="export-btn" bindtap="exportInventoryReport">导出报告</button>
  </view>
</view>