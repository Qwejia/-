<view class="container">
  <!-- 操作栏 -->
  <view class="action-bar">
    <text class="page-title">库存分析</text>
    <button class="export-btn" bindtap="exportAnalysisReport">导出报告</button>
  </view>

  <!-- 加载状态 -->
  <view wx:if="{{loading}}" class="loading">
    <text>加载中...</text>
  </view>

  <!-- 库存分析内容 -->
  <view wx:else class="analysis-content">
    <!-- 库存统计卡片 -->
    <view class="stats-cards">
      <view class="stat-card">
        <view class="stat-value">{{inventoryStats.totalProducts}}</view>
        <view class="stat-label">商品总数</view>
      </view>
      <view class="stat-card">
        <view class="stat-value">{{inventoryStats.lowStockProducts}}</view>
        <view class="stat-label">低库存商品</view>
      </view>
      <view class="stat-card">
        <view class="stat-value">{{inventoryStats.inStockProducts}}</view>
        <view class="stat-label">有库存商品</view>
      </view>
      <view class="stat-card">
        <view class="stat-value">¥{{inventoryStats.totalValue.toLocaleString()}}</view>
        <view class="stat-label">库存总值</view>
      </view>
    </view>

    <!-- 分类统计 -->
    <view class="category-section">
      <view class="section-title">分类统计</view>
      <view class="category-list">
        <view 
          wx:for="{{categoryStats}}" 
          wx:key="category"
          class="category-item"
        >
          <view class="category-info">
            <view class="category-name">{{item.category}}</view>
            <view class="category-count">商品数: {{item.count}}</view>
          </view>
          <view class="category-stats">
            <view class="category-stock">库存: {{item.stock}}</view>
            <view class="category-value">总值: ¥{{item.value.toLocaleString()}}</view>
          </view>
        </view>
      </view>
    </view>
  </view>
</view>