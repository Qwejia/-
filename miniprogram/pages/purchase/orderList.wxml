<!-- é‡‡è´­è®¢å•åˆ—è¡¨é¡µé¢ -->
<view class="container">
  <!-- é¡µé¢å¤´éƒ¨ -->
  <view class="header">
    <view class="header-left">
      <button class="back-button" bindtap="goBack">
        <text class="back-icon">â†</text>
      </button>
    </view>
    <view class="header-center">
      <text class="header-title">é‡‡è´­è®¢å•åˆ—è¡¨</text>
    </view>
    <view class="header-right">
      <button class="add-button" bindtap="goToOrderAdd">
        <text class="add-icon">+</text>
      </button>
    </view>
  </view>

  <!-- æœç´¢å’Œè¿‡æ»¤ -->
  <view class="search-filter-section">
    <view class="search-bar">
      <input 
        type="text" 
        placeholder="æœç´¢è®¢å•ç¼–å·æˆ–ä¾›åº”å•†" 
        value="{{searchKeyword}}"
        bindinput="handleSearchInput"
        class="search-input"
      />
      <text class="search-icon">ğŸ”</text>
    </view>
    <view class="filter-row">
      <view class="filter-item">
        <text class="filter-label">è®¢å•çŠ¶æ€:</text>
        <picker 
          range="{{statuses}}" 
          value="{{statusFilter}}"
          bindchange="handleStatusChange"
          class="filter-picker"
        >
          <view class="picker-text">
            {{statusFilter || 'å…¨éƒ¨'}}
          </view>
        </picker>
      </view>
      <view class="filter-item">
        <text class="filter-label">æ’åºæ–¹å¼:</text>
        <picker 
          range="['è®¢å•ç¼–å·', 'ä¾›åº”å•†', 'è®¢å•æ—¥æœŸ', 'è®¢å•é‡‘é¢', 'åˆ›å»ºæ—¶é—´']" 
          range-key="name"
          value="{{sortByIndex}}"
          bindchange="handleSortChange"
          class="filter-picker"
        >
          <view class="picker-text">
            {{sortBy === 'orderNumber' ? 'è®¢å•ç¼–å·' : sortBy === 'supplierName' ? 'ä¾›åº”å•†' : sortBy === 'orderDate' ? 'è®¢å•æ—¥æœŸ' : sortBy === 'totalAmount' ? 'è®¢å•é‡‘é¢' : 'åˆ›å»ºæ—¶é—´'}} {{sortOrder === 'asc' ? 'â†‘' : 'â†“'}}
          </view>
        </picker>
      </view>
    </view>
  </view>

  <!-- è®¢å•åˆ—è¡¨ -->
  <view class="orders-section">
    <view wx:for="{{filteredOrders}}" wx:key="_id" class="order-item" data-order-id="{{_id}}" bindtap="goToOrderDetail">
      <view class="order-header">
        <text class="order-number">{{item.orderNumber}}</text>
        <text class="order-status {{item.status}}">{{item.status === 'completed' ? 'å·²å®Œæˆ' : item.status === 'pending' ? 'å¾…å¤„ç†' : 'å¤„ç†ä¸­'}}</text>
      </view>
      <view class="order-info">
        <text class="order-supplier">{{item.supplierName}}</text>
        <text class="order-date">{{item.orderDate}}</text>
      </view>
      <view class="order-amount">
        <text class="amount-label">è®¢å•é‡‘é¢:</text>
        <text class="amount-value">{{item.totalAmount.toLocaleString('zh-CN', { style: 'currency', currency: 'CNY' })}}</text>
      </view>
      <view class="order-items">
        <text class="items-label">å•†å“æ•°é‡:</text>
        <text class="items-value">{{item.items.length}} é¡¹</text>
      </view>
      <view class="order-footer">
        <text class="expected-delivery">é¢„è®¡åˆ°è´§: {{item.expectedDeliveryDate}}</text>
      </view>
    </view>
    <view wx:if="{{filteredOrders.length === 0}}" class="empty-state">
      <text class="empty-text">æš‚æ— é‡‡è´­è®¢å•</text>
    </view>
  </view>
</view>