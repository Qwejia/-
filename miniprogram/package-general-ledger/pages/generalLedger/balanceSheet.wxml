<!-- pages/generalLedger/balanceSheet.wxml -->
<view class="container">
  <!-- æœç´¢æ  -->
  <view class="search-section">
    <view class="search-box">
      <text class="search-icon">ğŸ”</text>
      <input type="text" placeholder="æœç´¢ç§‘ç›®ä»£ç æˆ–åç§°" value="{{searchKeyword}}" bindinput="onSearch" class="search-input" />
    </view>
  </view>
  
  <!-- ç­›é€‰æ¡ä»¶ -->
  <view class="filter-section">
    <view class="filter-row">
      <view class="filter-item">
        <text class="label">ç§‘ç›®ç±»åˆ«</text>
        <picker mode="selector" range="{{categoryOptions}}" range-key="text" value="{{categoryFilter}}" bindchange="onCategoryChange" class="picker">
          <view class="picker-text">{{categoryOptions[categoryFilter].text}}</view>
        </picker>
      </view>
      <view class="filter-item">
        <text class="label">ç§‘ç›®çº§æ¬¡</text>
        <picker mode="selector" range="{{levelOptions}}" range-key="text" value="{{levelFilter}}" bindchange="onLevelChange" class="picker">
          <view class="picker-text">{{levelOptions[levelFilter].text}}</view>
        </picker>
      </view>
    </view>
    <view class="filter-row">
      <view class="filter-item">
        <text class="label">æœŸé—´</text>
        <picker mode="selector" range="{{periodOptions}}" range-key="text" value="{{periodIndex}}" bindchange="onPeriodChange" class="picker">
          <view class="picker-text">{{periodText}}</view>
        </picker>
      </view>
    </view>
  </view>
  
  <!-- ä½™é¢è¡¨ -->
  <view class="balance-section">
    <view class="section-header">
      <text class="title">ä½™é¢è¡¨</text>
    </view>
    
    <view class="balance-header">
      <text class="header-item">ç§‘ç›®ä»£ç </text>
      <text class="header-item">ç§‘ç›®åç§°</text>
      <text class="header-item">ç±»åˆ«</text>
      <text class="header-item">æœŸåˆä½™é¢</text>
      <text class="header-item">å€Ÿæ–¹å‘ç”Ÿé¢</text>
      <text class="header-item">è´·æ–¹å‘ç”Ÿé¢</text>
      <text class="header-item">æœŸæœ«ä½™é¢</text>
    </view>
    
    <view class="balance-list">
      <view wx:for="{{filteredBalanceData}}" wx:key="account._id" class="balance-item" bindtap="viewSubLedger" data-id="{{item.account._id}}">
        <text class="item-code">{{item.account.code}}</text>
        <text class="item-name">{{item.account.name}}</text>
        <text class="item-category">{{item.categoryName}}</text>
        <text class="item-opening {{item.openingBalance >= 0 ? 'debit' : 'credit'}}">Â¥{{item.openingBalance.toFixed(2)}}</text>
        <text class="item-debit">Â¥{{item.currentDebit.toFixed(2)}}</text>
        <text class="item-credit">Â¥{{item.currentCredit.toFixed(2)}}</text>
        <text class="item-closing {{item.closingBalance >= 0 ? 'debit' : 'credit'}}">Â¥{{item.closingBalance.toFixed(2)}}</text>
      </view>
      
      <view wx:if="filteredBalanceData.length === 0" class="empty-state">
        <text class="empty-text">æš‚æ— ä½™é¢æ•°æ®</text>
      </view>
    </view>
  </view>
</view>
