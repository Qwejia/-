<!-- pages/generalLedger/subLedger.wxml -->
<view class="container">
  <!-- ç§‘ç›®ä¿¡æ¯ -->
  <view class="account-info-section" wx:if="{{account}}">
    <view class="account-header">
      <text class="account-code">{{account.code}}</text>
      <text class="account-name">{{account.name}}</text>
    </view>
    <view class="account-details">
      <text class="detail-item">ç±»åˆ«ï¼š{{account.category === 'asset' ? 'èµ„äº§ç±»' : account.category === 'liability' ? 'è´Ÿå€ºç±»' : account.category === 'equity' ? 'æ‰€æœ‰è€…æƒç›Šç±»' : account.category === 'income' ? 'æŸç›Šç±»' : account.category === 'cost' ? 'æˆæœ¬ç±»' : account.category}}</text>
      <text class="detail-item">ä½™é¢æ–¹å‘ï¼š{{account.balanceDirection === 'debit' ? 'å€Ÿæ–¹' : 'è´·æ–¹'}}</text>
      <text class="detail-item">å½“å‰ä½™é¢ï¼šÂ¥{{account.balance || 0}}</text>
    </view>
  </view>
  
  <!-- ç­›é€‰æ¡ä»¶ -->
  <view class="filter-section">
    <view class="filter-item">
      <text class="label">ç§‘ç›®</text>
      <picker mode="selector" range="{{accountOptions}}" range-key="text" value="{{accountIndex}}" bindchange="onAccountChange" class="picker">
        <view class="picker-text">{{accountText}}</view>
      </picker>
    </view>
    <view class="filter-item">
      <text class="label">æœŸé—´</text>
      <picker mode="selector" range="{{periodOptions}}" range-key="text" value="{{periodIndex}}" bindchange="onPeriodChange" class="picker">
        <view class="picker-text">{{periodText}}</view>
      </picker>
    </view>
  </view>
  
  <!-- æœç´¢æ  -->
  <view class="search-section">
    <view class="search-box">
      <text class="search-icon">ğŸ”</text>
      <input type="text" placeholder="æœç´¢å‡­è¯æ‘˜è¦" value="{{searchKeyword}}" bindinput="onSearch" class="search-input" />
    </view>
  </view>
  
  <!-- æ˜ç»†è´¦åˆ—è¡¨ -->
  <view class="subledger-section">
    <view class="section-header">
      <text class="title">æ˜ç»†è´¦</text>
    </view>
    
    <view class="subledger-header">
      <text class="header-item">æ—¥æœŸ</text>
      <text class="header-item">å‡­è¯å·</text>
      <text class="header-item">æ‘˜è¦</text>
      <text class="header-item">å€Ÿæ–¹</text>
      <text class="header-item">è´·æ–¹</text>
      <text class="header-item">ä½™é¢</text>
    </view>
    
    <view class="subledger-list">
      <view wx:for="{{transactions}}" wx:key="voucher._id" class="subledger-item" bindtap="viewVoucherDetail" data-id="{{item.voucher._id}}">
        <text class="item-date">{{item.voucher.date}}</text>
        <text class="item-voucher">{{item.voucher.number}}</text>
        <text class="item-summary">{{item.voucher.summary}}</text>
        <text class="item-debit">{{item.transaction.debitAmount > 0 ? 'Â¥' + item.transaction.debitAmount.toFixed(2) : '-'}}</text>
        <text class="item-credit">{{item.transaction.creditAmount > 0 ? 'Â¥' + item.transaction.creditAmount.toFixed(2) : '-'}}</text>
        <text class="item-balance {{item.runningBalance >= 0 ? 'debit' : 'credit'}}">Â¥{{item.runningBalance.toFixed(2)}}</text>
      </view>
      
      <view wx:if="transactions.length === 0" class="empty-state">
        <text class="empty-text">æš‚æ— äº¤æ˜“è®°å½•</text>
      </view>
    </view>
  </view>
</view>
