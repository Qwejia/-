<view class="container">
  <!-- é¡µé¢é¡¶éƒ¨ -->
  <view class="page-header">
    <text class="page-title">åˆ©æ¶¦è¡¨</text>
    <view class="header-actions">
      <view class="type-tabs">
        <view class="tab-item {{reportType === 'month' ? 'active' : ''}}" bindtap="switchReportType" data-type="month">
          <text>æœˆåº¦</text>
        </view>
        <view class="tab-item {{reportType === 'year' ? 'active' : ''}}" bindtap="switchReportType" data-type="year">
          <text>å¹´åº¦</text>
        </view>
      </view>
      <picker mode="{{reportType === 'month' ? 'month' : 'year'}}" value="{{reportPeriod}}" bindchange="onPeriodChange" class="period-picker">
        <view class="picker-content">{{reportPeriod}}</view>
      </picker>
      <view class="export-btn" bindtap="exportReport">
        <text class="export-icon">ğŸ“¤</text>
      </view>
    </view>
  </view>

  <!-- æŠ¥è¡¨å†…å®¹ -->
  <view class="report-content">
    <view class="table">
      <!-- åˆ©æ¶¦è¡¨é¡¹ç›® -->
      <block wx:for="{{profitItems}}" wx:for-item="category" wx:key="category">
        <!-- åˆ†ç±»æ ‡é¢˜ -->
        <view class="table-row category-header">
          <view class="table-cell category-title" colspan="2">{{category.category}}</view>
        </view>
        
        <!-- åˆ†ç±»ä¸‹çš„é¡¹ç›® -->
        <block wx:for="{{category.items}}" wx:for-item="item" wx:key="name">
          <view class="table-row item-row">
            <view class="table-cell item-name">{{item.name}}</view>
            <view class="table-cell item-amount {{item.type}}">{{item.type === 'income' ? '+' : '-'}}Â¥{{item.amount.toFixed(2)}}</view>
          </view>
        </block>
        
        <!-- åˆ†ç±»æ€»è®¡ -->
        <view class="table-row total-row">
          <view class="table-cell total-label">
            <text class="total-prefix">{{category.category === 'è¥ä¸šæ”¶å…¥' || category.category === 'è¥ä¸šåˆ©æ¶¦' || category.category === 'åˆ©æ¶¦æ€»é¢' || category.category === 'å‡€åˆ©æ¶¦' ? '' : 'åˆè®¡'}}</text>
            {{category.category}}
          </view>
          <view class="table-cell total-amount {{category.totalType}}">
            {{category.totalType === 'income' || category.totalType === 'profit' || category.totalType === 'netprofit' ? '+' : '-'}}Â¥{{category.total.toFixed(2)}}
          </view>
        </view>
        
        <!-- åˆ†éš”çº¿ -->
        <view class="table-row separator-row">
          <view class="table-cell separator" colspan="2"></view>
        </view>
      </block>
    </view>
  </view>
</view>