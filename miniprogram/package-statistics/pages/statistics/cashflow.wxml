<view class="container">
  <!-- é¡µé¢é¡¶éƒ¨ -->
  <view class="page-header">
    <text class="page-title">ç°é‡‘æµé‡è¡¨</text>
    <view class="header-actions">
      <view class="type-tabs">
        <view class="tab-item {{reportType === 'month' ? 'active' : ''}}" bindtap="switchReportType" data-type="month">
          <text>æœˆåº¦</text>
        </view>
        <view class="tab-item {{reportType === 'year' ? 'active' : ''}}" bindtap="switchReportType" data-type="year">
          <text>å¹´åº¦</text>
        </view>
      </view>
      <picker mode="{{reportType === 'month' ? 'month' : 'year'}}" value="{{reportPeriod}}" bindchange="onPeriodChange" class="period-picker">
        <view class="picker-content">{{reportPeriod}}</view>
      </picker>
      <view class="export-btn" bindtap="exportReport">
        <text class="export-icon">ğŸ“¤</text>
      </view>
    </view>
  </view>

  <!-- æŠ¥è¡¨å†…å®¹ -->
  <view class="report-content">
    <!-- ç»è¥æ´»åŠ¨äº§ç”Ÿçš„ç°é‡‘æµé‡ -->
    <view class="section">
      <view class="section-header">
        <text class="section-title">ä¸€ã€ç»è¥æ´»åŠ¨äº§ç”Ÿçš„ç°é‡‘æµé‡</text>
      </view>
      
      <!-- ç»è¥æ´»åŠ¨ç°é‡‘æµå…¥ -->
      <view class="subsection">
        <text class="subsection-title">ç°é‡‘æµå…¥</text>
        <view class="table">
          <block wx:for="{{cashflowStatement.operatingActivities.inflows}}" wx:key="name">
            <view class="table-row">
              <view class="table-cell item-name">
                <text class="item-number">1.{{index + 1}}</text>
                {{item.name}}
              </view>
              <view class="table-cell item-amount inflow">+Â¥{{item.amount.toFixed(2)}}</view>
            </view>
          </block>
        </view>
      </view>
      
      <!-- ç»è¥æ´»åŠ¨ç°é‡‘æµå‡º -->
      <view class="subsection">
        <text class="subsection-title">ç°é‡‘æµå‡º</text>
        <view class="table">
          <block wx:for="{{cashflowStatement.operatingActivities.outflows}}" wx:key="name">
            <view class="table-row">
              <view class="table-cell item-name">
                <text class="item-number">2.{{index + 1}}</text>
                {{item.name}}
              </view>
              <view class="table-cell item-amount outflow">-Â¥{{item.amount.toFixed(2)}}</view>
            </view>
          </block>
        </view>
      </view>
      
      <!-- ç»è¥æ´»åŠ¨ç°é‡‘æµé‡å‡€é¢ -->
      <view class="net-cash-flow">
        <text class="net-label">ç»è¥æ´»åŠ¨äº§ç”Ÿçš„ç°é‡‘æµé‡å‡€é¢</text>
        <text class="net-amount {{cashflowStatement.operatingActivities.netCashFlow >= 0 ? 'inflow' : 'outflow'}}">
          {{cashflowStatement.operatingActivities.netCashFlow >= 0 ? '+' : ''}}Â¥{{cashflowStatement.operatingActivities.netCashFlow.toFixed(2)}}
        </text>
      </view>
    </view>

    <!-- æŠ•èµ„æ´»åŠ¨äº§ç”Ÿçš„ç°é‡‘æµé‡ -->
    <view class="section">
      <view class="section-header">
        <text class="section-title">äºŒã€æŠ•èµ„æ´»åŠ¨äº§ç”Ÿçš„ç°é‡‘æµé‡</text>
      </view>
      
      <!-- æŠ•èµ„æ´»åŠ¨ç°é‡‘æµå…¥ -->
      <view class="subsection">
        <text class="subsection-title">ç°é‡‘æµå…¥</text>
        <view class="table">
          <block wx:for="{{cashflowStatement.investingActivities.inflows}}" wx:key="name">
            <view class="table-row">
              <view class="table-cell item-name">
                <text class="item-number">1.{{index + 1}}</text>
                {{item.name}}
              </view>
              <view class="table-cell item-amount inflow">+Â¥{{item.amount.toFixed(2)}}</view>
            </view>
          </block>
        </view>
      </view>
      
      <!-- æŠ•èµ„æ´»åŠ¨ç°é‡‘æµå‡º -->
      <view class="subsection">
        <text class="subsection-title">ç°é‡‘æµå‡º</text>
        <view class="table">
          <block wx:for="{{cashflowStatement.investingActivities.outflows}}" wx:key="name">
            <view class="table-row">
              <view class="table-cell item-name">
                <text class="item-number">2.{{index + 1}}</text>
                {{item.name}}
              </view>
              <view class="table-cell item-amount outflow">-Â¥{{item.amount.toFixed(2)}}</view>
            </view>
          </block>
        </view>
      </view>
      
      <!-- æŠ•èµ„æ´»åŠ¨ç°é‡‘æµé‡å‡€é¢ -->
      <view class="net-cash-flow">
        <text class="net-label">æŠ•èµ„æ´»åŠ¨äº§ç”Ÿçš„ç°é‡‘æµé‡å‡€é¢</text>
        <text class="net-amount {{cashflowStatement.investingActivities.netCashFlow >= 0 ? 'inflow' : 'outflow'}}">
          {{cashflowStatement.investingActivities.netCashFlow >= 0 ? '+' : ''}}Â¥{{cashflowStatement.investingActivities.netCashFlow.toFixed(2)}}
        </text>
      </view>
    </view>

    <!-- ç­¹èµ„æ´»åŠ¨äº§ç”Ÿçš„ç°é‡‘æµé‡ -->
    <view class="section">
      <view class="section-header">
        <text class="section-title">ä¸‰ã€ç­¹èµ„æ´»åŠ¨äº§ç”Ÿçš„ç°é‡‘æµé‡</text>
      </view>
      
      <!-- ç­¹èµ„æ´»åŠ¨ç°é‡‘æµå…¥ -->
      <view class="subsection">
        <text class="subsection-title">ç°é‡‘æµå…¥</text>
        <view class="table">
          <block wx:for="{{cashflowStatement.financingActivities.inflows}}" wx:key="name">
            <view class="table-row">
              <view class="table-cell item-name">
                <text class="item-number">1.{{index + 1}}</text>
                {{item.name}}
              </view>
              <view class="table-cell item-amount inflow">+Â¥{{item.amount.toFixed(2)}}</view>
            </view>
          </block>
        </view>
      </view>
      
      <!-- ç­¹èµ„æ´»åŠ¨ç°é‡‘æµå‡º -->
      <view class="subsection">
        <text class="subsection-title">ç°é‡‘æµå‡º</text>
        <view class="table">
          <block wx:for="{{cashflowStatement.financingActivities.outflows}}" wx:key="name">
            <view class="table-row">
              <view class="table-cell item-name">
                <text class="item-number">2.{{index + 1}}</text>
                {{item.name}}
              </view>
              <view class="table-cell item-amount outflow">-Â¥{{item.amount.toFixed(2)}}</view>
            </view>
          </block>
        </view>
      </view>
      
      <!-- ç­¹èµ„æ´»åŠ¨ç°é‡‘æµé‡å‡€é¢ -->
      <view class="net-cash-flow">
        <text class="net-label">ç­¹èµ„æ´»åŠ¨äº§ç”Ÿçš„ç°é‡‘æµé‡å‡€é¢</text>
        <text class="net-amount {{cashflowStatement.financingActivities.netCashFlow >= 0 ? 'inflow' : 'outflow'}}">
          {{cashflowStatement.financingActivities.netCashFlow >= 0 ? '+' : ''}}Â¥{{cashflowStatement.financingActivities.netCashFlow.toFixed(2)}}
        </text>
      </view>
    </view>

    <!-- æ±‡ç‡å˜åŠ¨å¯¹ç°é‡‘åŠç°é‡‘ç­‰ä»·ç‰©çš„å½±å“ -->
    <view class="section">
      <view class="table">
        <view class="table-row">
          <view class="table-cell item-name">
            <text class="item-number">å››</text>
            æ±‡ç‡å˜åŠ¨å¯¹ç°é‡‘åŠç°é‡‘ç­‰ä»·ç‰©çš„å½±å“
          </view>
          <view class="table-cell item-amount {{cashflowStatement.effectOfExchangeRateChanges >= 0 ? 'inflow' : 'outflow'}}">
            {{cashflowStatement.effectOfExchangeRateChanges >= 0 ? '+' : ''}}Â¥{{cashflowStatement.effectOfExchangeRateChanges.toFixed(2)}}
          </view>
        </view>
      </view>
    </view>

    <!-- ç°é‡‘åŠç°é‡‘ç­‰ä»·ç‰©å‡€å¢åŠ é¢ -->
    <view class="section">
      <view class="table">
        <view class="table-row total-row">
          <view class="table-cell total-label">
            <text class="item-number">äº”</text>
            ç°é‡‘åŠç°é‡‘ç­‰ä»·ç‰©å‡€å¢åŠ é¢
          </view>
          <view class="table-cell total-amount {{cashflowStatement.netIncreaseInCashAndCashEquivalents >= 0 ? 'inflow' : 'outflow'}}">
            {{cashflowStatement.netIncreaseInCashAndCashEquivalents >= 0 ? '+' : ''}}Â¥{{cashflowStatement.netIncreaseInCashAndCashEquivalents.toFixed(2)}}
          </view>
        </view>
      </view>
    </view>

    <!-- æœŸåˆå’ŒæœŸæœ«ç°é‡‘åŠç°é‡‘ç­‰ä»·ç‰©ä½™é¢ -->
    <view class="section">
      <view class="table">
        <view class="table-row">
          <view class="table-cell item-name">
            <text class="item-number">å…­</text>
            æœŸåˆç°é‡‘åŠç°é‡‘ç­‰ä»·ç‰©ä½™é¢
          </view>
          <view class="table-cell item-amount inflow">+Â¥{{cashflowStatement.beginningCashAndCashEquivalents.toFixed(2)}}</view>
        </view>
        <view class="table-row final-row">
          <view class="table-cell final-label">
            <text class="item-number">ä¸ƒ</text>
            æœŸæœ«ç°é‡‘åŠç°é‡‘ç­‰ä»·ç‰©ä½™é¢
          </view>
          <view class="table-cell final-amount">Â¥{{cashflowStatement.endingCashAndCashEquivalents.toFixed(2)}}</view>
        </view>
      </view>
    </view>
  </view>
</view>