// pages/business-education/articles.js
Page({

  /**
   * é¡µé¢çš„åˆå§‹æ•°æ®
   */
  data: {
    articles: [],
    filteredArticles: [],
    categories: [
      { id: 'all', name: 'å…¨éƒ¨' },
      { id: 'tax', name: 'ç¨ŽåŠ¡ç­¹åˆ’' },
      { id: 'accounting', name: 'è´¦åŠ¡å¤„ç†' },
      { id: 'finance', name: 'è´¢åŠ¡ç®¡ç†' },
      { id: 'business', name: 'ç»è¥åˆ†æž' },
      { id: 'ecommerce', name: 'ç”µå•†è´¢åŠ¡' },
      { id: 'startup', name: 'åˆ›ä¸šè´¢åŠ¡' },
      { id: 'investment', name: 'æŠ•èµ„åˆ†æž' },
      { id: 'risk', name: 'é£Žé™©æŽ§åˆ¶' }
    ],
    selectedCategory: 'all',
    loading: false
  },

  /**
   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢åŠ è½½
   */
  onLoad(options) {
    // èŽ·å–ä¼ å…¥çš„åˆ†ç±»å‚æ•°
    if (options.category) {
      this.setData({ selectedCategory: options.category });
    }
    this.loadArticles();
  },

  /**
   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢åˆæ¬¡æ¸²æŸ“å®Œæˆ
   */
  onReady() {

  },

  /**
   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢æ˜¾ç¤º
   */
  onShow() {

  },

  /**
   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢éšè—
   */
  onHide() {

  },

  /**
   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢å¸è½½
   */
  onUnload() {

  },

  /**
   * é¡µé¢ç›¸å…³äº‹ä»¶å¤„ç†å‡½æ•°--ç›‘å¬ç”¨æˆ·ä¸‹æ‹‰åŠ¨ä½œ
   */
  onPullDownRefresh() {
    this.loadArticles();
    wx.stopPullDownRefresh();
  },

  /**
   * é¡µé¢ä¸Šæ‹‰è§¦åº•äº‹ä»¶çš„å¤„ç†å‡½æ•°
   */
  onReachBottom() {

  },

  /**
   * ç”¨æˆ·ç‚¹å‡»å³ä¸Šè§’åˆ†äº«
   */
  onShareAppMessage() {

  },

  // åŠ è½½æ–‡ç« æ•°æ®
  loadArticles() {
    this.setData({ loading: true });
    
    // æ¨¡æ‹Ÿæ–‡ç« æ•°æ®
    const articles = [
      {
        id: 1,
        title: 'å°è§„æ¨¡çº³ç¨Žäººå¦‚ä½•åˆè§„é¿ç¨Ž',
        excerpt: 'æœ¬æ–‡è¯¦ç»†ä»‹ç»å°è§„æ¨¡çº³ç¨Žäººå¯äº«å—çš„ç¨Žæ”¶ä¼˜æƒ æ”¿ç­–ï¼Œä»¥åŠå¦‚ä½•é€šè¿‡åˆæ³•æ‰‹æ®µé™ä½Žç¨Žè´Ÿ...',
        content: 'è¯¦ç»†å†…å®¹ï¼šæœ¬æ–‡è¯¦ç»†ä»‹ç»å°è§„æ¨¡çº³ç¨Žäººå¯äº«å—çš„ç¨Žæ”¶ä¼˜æƒ æ”¿ç­–ï¼Œä»¥åŠå¦‚ä½•é€šè¿‡åˆæ³•æ‰‹æ®µé™ä½Žç¨Žè´Ÿã€‚åŒ…æ‹¬å¢žå€¼ç¨Žå‡å…ã€ä¼ä¸šæ‰€å¾—ç¨Žä¼˜æƒ ã€å°èŠ±ç¨Žä¼˜æƒ ç­‰å¤šä¸ªæ–¹é¢çš„æ”¿ç­–è§£æžå’Œå®žé™…æ“ä½œæŒ‡å—ã€‚',
        date: '2026-01-20',
        reads: '1,258',
        likes: '89',
        comments: '23',
        author: 'ç¨ŽåŠ¡ä¸“å®¶ å¼ æ˜Ž',
        category: 'tax',
        icon: 'ðŸ“'
      },
      {
        id: 2,
        title: 'ç”µå•†ä¼ä¸šæˆæœ¬æ ¸ç®—æŠ€å·§',
        excerpt: 'ç”µå•†ä¼ä¸šçš„æˆæœ¬æ ¸ç®—ä¸Žä¼ ç»Ÿä¼ä¸šæœ‰æ‰€ä¸åŒï¼Œæœ¬æ–‡åˆ†äº«ç”µå•†ä¼ä¸šæˆæœ¬æ ¸ç®—çš„å®žç”¨æŠ€å·§...',
        content: 'è¯¦ç»†å†…å®¹ï¼šç”µå•†ä¼ä¸šçš„æˆæœ¬æ ¸ç®—ä¸Žä¼ ç»Ÿä¼ä¸šæœ‰æ‰€ä¸åŒï¼Œæœ¬æ–‡åˆ†äº«ç”µå•†ä¼ä¸šæˆæœ¬æ ¸ç®—çš„å®žç”¨æŠ€å·§ã€‚åŒ…æ‹¬å¹³å°è´¹ç”¨ã€ç‰©æµæˆæœ¬ã€æŽ¨å¹¿è´¹ç”¨ç­‰å„é¡¹æˆæœ¬çš„æ ¸ç®—æ–¹æ³•å’Œä¼˜åŒ–ç­–ç•¥ï¼Œå¸®åŠ©ç”µå•†ä¼ä¸šå‡†ç¡®è®¡ç®—æˆæœ¬ï¼Œæé«˜ç›ˆåˆ©èƒ½åŠ›ã€‚',
        date: '2026-01-18',
        reads: '986',
        likes: '67',
        comments: '15',
        author: 'è´¢åŠ¡é¡¾é—® çŽ‹å¼º',
        category: 'ecommerce',
        icon: 'ðŸ’¡'
      },
      {
        id: 3,
        title: 'å¦‚ä½•é€šè¿‡è´¢åŠ¡æŠ¥è¡¨åˆ†æžä¼ä¸šç»è¥çŠ¶å†µ',
        excerpt: 'è´¢åŠ¡æŠ¥è¡¨æ˜¯ä¼ä¸šç»è¥çŠ¶å†µçš„æ™´é›¨è¡¨ï¼Œæœ¬æ–‡æ•™ä½ å¦‚ä½•é€šè¿‡è´¢åŠ¡æŠ¥è¡¨å¿«é€Ÿåˆ†æžä¼ä¸šç»è¥çŠ¶å†µ...',
        content: 'è¯¦ç»†å†…å®¹ï¼šè´¢åŠ¡æŠ¥è¡¨æ˜¯ä¼ä¸šç»è¥çŠ¶å†µçš„æ™´é›¨è¡¨ï¼Œæœ¬æ–‡æ•™ä½ å¦‚ä½•é€šè¿‡è´¢åŠ¡æŠ¥è¡¨å¿«é€Ÿåˆ†æžä¼ä¸šç»è¥çŠ¶å†µã€‚åŒ…æ‹¬èµ„äº§è´Ÿå€ºè¡¨ã€åˆ©æ¶¦è¡¨ã€çŽ°é‡‘æµé‡è¡¨çš„åˆ†æžæ–¹æ³•å’Œå…³é”®æŒ‡æ ‡è§£è¯»ï¼Œå¸®åŠ©ä¼ä¸šç®¡ç†è€…åšå‡ºæ­£ç¡®çš„ç»è¥å†³ç­–ã€‚',
        date: '2026-01-15',
        reads: '1,567',
        likes: '124',
        comments: '31',
        author: 'è´¢åŠ¡åˆ†æžå¸ˆ èµµé™',
        category: 'finance',
        icon: 'ðŸ“ˆ'
      },
      {
        id: 4,
        title: 'åˆ›ä¸šä¼ä¸šå¦‚ä½•åšå¥½è´¢åŠ¡ç®¡ç†',
        excerpt: 'åˆ›ä¸šåˆæœŸçš„è´¢åŠ¡ç®¡ç†è‡³å…³é‡è¦ï¼Œæœ¬æ–‡åˆ†äº«åˆ›ä¸šä¼ä¸šè´¢åŠ¡ç®¡ç†çš„æ ¸å¿ƒè¦ç‚¹å’Œå®žç”¨æŠ€å·§...',
        content: 'è¯¦ç»†å†…å®¹ï¼šåˆ›ä¸šåˆæœŸçš„è´¢åŠ¡ç®¡ç†è‡³å…³é‡è¦ï¼Œæœ¬æ–‡åˆ†äº«åˆ›ä¸šä¼ä¸šè´¢åŠ¡ç®¡ç†çš„æ ¸å¿ƒè¦ç‚¹å’Œå®žç”¨æŠ€å·§ã€‚åŒ…æ‹¬èµ„é‡‘è§„åˆ’ã€æˆæœ¬æŽ§åˆ¶ã€ç¨ŽåŠ¡ç­¹åˆ’ã€èžèµ„ç­–ç•¥ç­‰å¤šä¸ªæ–¹é¢çš„å†…å®¹ï¼Œå¸®åŠ©åˆ›ä¸šä¼ä¸šå»ºç«‹å¥å…¨çš„è´¢åŠ¡ç®¡ç†åˆ¶åº¦ï¼Œä¸ºä¼ä¸šçš„å¥åº·å‘å±•å¥ å®šåŸºç¡€ã€‚',
        date: '2026-01-12',
        reads: '1,023',
        likes: '76',
        comments: '19',
        author: 'åˆ›ä¸šå¯¼å¸ˆ æŽå¼º',
        category: 'startup',
        icon: 'ðŸš€'
      },
      {
        id: 5,
        title: 'ä¼ä¸šæˆæœ¬æŽ§åˆ¶ç­–ç•¥',
        excerpt: 'æˆæœ¬æŽ§åˆ¶æ˜¯ä¼ä¸šæé«˜ç›ˆåˆ©èƒ½åŠ›çš„å…³é”®ï¼Œæœ¬æ–‡åˆ†äº«ä¼ä¸šæˆæœ¬æŽ§åˆ¶çš„æœ‰æ•ˆç­–ç•¥å’Œæ–¹æ³•...',
        content: 'è¯¦ç»†å†…å®¹ï¼šæˆæœ¬æŽ§åˆ¶æ˜¯ä¼ä¸šæé«˜ç›ˆåˆ©èƒ½åŠ›çš„å…³é”®ï¼Œæœ¬æ–‡åˆ†äº«ä¼ä¸šæˆæœ¬æŽ§åˆ¶çš„æœ‰æ•ˆç­–ç•¥å’Œæ–¹æ³•ã€‚åŒ…æ‹¬åŽŸææ–™æˆæœ¬ã€äººå·¥æˆæœ¬ã€è¿è¥æˆæœ¬ç­‰å„é¡¹æˆæœ¬çš„æŽ§åˆ¶æŽªæ–½ï¼Œä»¥åŠæˆæœ¬æŽ§åˆ¶çš„åˆ¶åº¦å»ºè®¾å’Œæ‰§è¡Œç›‘ç£ï¼Œå¸®åŠ©ä¼ä¸šé™ä½Žæˆæœ¬ï¼Œæé«˜ç«žäº‰åŠ›ã€‚',
        date: '2026-01-10',
        reads: '876',
        likes: '58',
        comments: '12',
        author: 'æˆæœ¬ç®¡ç†ä¸“å®¶ å¼ ä¼Ÿ',
        category: 'finance',
        icon: 'ðŸ’°'
      },
      {
        id: 6,
        title: 'æŠ•èµ„åˆ†æžåŸºç¡€',
        excerpt: 'å­¦ä¹ æŠ•èµ„åˆ†æžçš„åŸºæœ¬æ–¹æ³•å’ŒæŠ€å·§ï¼Œæé«˜æŠ•èµ„å†³ç­–èƒ½åŠ›...',
        content: 'è¯¦ç»†å†…å®¹ï¼šå­¦ä¹ æŠ•èµ„åˆ†æžçš„åŸºæœ¬æ–¹æ³•å’ŒæŠ€å·§ï¼Œæé«˜æŠ•èµ„å†³ç­–èƒ½åŠ›ã€‚åŒ…æ‹¬å®è§‚ç»æµŽåˆ†æžã€è¡Œä¸šåˆ†æžã€å…¬å¸åˆ†æžç­‰å¤šä¸ªå±‚é¢çš„åˆ†æžæ–¹æ³•ï¼Œä»¥åŠæŠ•èµ„ç»„åˆç®¡ç†å’Œé£Žé™©æŽ§åˆ¶çš„åŸºæœ¬åŽŸç†ï¼Œå¸®åŠ©æŠ•èµ„è€…åšå‡ºæ˜Žæ™ºçš„æŠ•èµ„å†³ç­–ã€‚',
        date: '2026-01-08',
        reads: '754',
        likes: '46',
        comments: '9',
        author: 'æŠ•èµ„é¡¾é—® é™ˆå®‡',
        category: 'investment',
        icon: 'ðŸ’¹'
      },
      {
        id: 7,
        title: 'ä¼ä¸šè´¢åŠ¡é£Žé™©æŽ§åˆ¶',
        excerpt: 'è¯†åˆ«å’ŒæŽ§åˆ¶ä¼ä¸šè´¢åŠ¡é£Žé™©ï¼Œä¿éšœä¼ä¸šå¥åº·å‘å±•...',
        content: 'è¯¦ç»†å†…å®¹ï¼šè¯†åˆ«å’ŒæŽ§åˆ¶ä¼ä¸šè´¢åŠ¡é£Žé™©ï¼Œä¿éšœä¼ä¸šå¥åº·å‘å±•ã€‚åŒ…æ‹¬å¸‚åœºé£Žé™©ã€ä¿¡ç”¨é£Žé™©ã€æµåŠ¨æ€§é£Žé™©ã€æ“ä½œé£Žé™©ç­‰å¤šç§é£Žé™©çš„è¯†åˆ«æ–¹æ³•å’ŒæŽ§åˆ¶æŽªæ–½ï¼Œä»¥åŠä¼ä¸šé£Žé™©ç®¡ç†ä½“ç³»çš„å»ºè®¾å’Œå®Œå–„ï¼Œå¸®åŠ©ä¼ä¸šæœ‰æ•ˆé˜²èŒƒå’Œåº”å¯¹è´¢åŠ¡é£Žé™©ã€‚',
        date: '2026-01-05',
        reads: '923',
        likes: '65',
        comments: '14',
        author: 'é£ŽæŽ§ä¸“å®¶ åˆ˜èŠ³',
        category: 'risk',
        icon: 'ðŸ›¡ï¸'
      },
      {
        id: 8,
        title: 'è´¢åŠ¡æŠ¥è¡¨é€ å‡è¯†åˆ«æŠ€å·§',
        excerpt: 'äº†è§£è´¢åŠ¡æŠ¥è¡¨é€ å‡çš„å¸¸è§æ‰‹æ®µï¼ŒæŽŒæ¡è¯†åˆ«è´¢åŠ¡æŠ¥è¡¨é€ å‡çš„æ–¹æ³•...',
        content: 'è¯¦ç»†å†…å®¹ï¼šäº†è§£è´¢åŠ¡æŠ¥è¡¨é€ å‡çš„å¸¸è§æ‰‹æ®µï¼ŒæŽŒæ¡è¯†åˆ«è´¢åŠ¡æŠ¥è¡¨é€ å‡çš„æ–¹æ³•ã€‚åŒ…æ‹¬æ”¶å…¥é€ å‡ã€æˆæœ¬é€ å‡ã€èµ„äº§é€ å‡ã€è´Ÿå€ºé€ å‡ç­‰å¤šç§é€ å‡æ‰‹æ®µçš„è¯†åˆ«æ–¹æ³•ï¼Œä»¥åŠé€šè¿‡è´¢åŠ¡æŒ‡æ ‡åˆ†æžã€éžè´¢åŠ¡ä¿¡æ¯åˆ†æžç­‰å¤šç§é€”å¾„å‘çŽ°è´¢åŠ¡é€ å‡çš„æŠ€å·§ï¼Œå¸®åŠ©æŠ•èµ„è€…å’Œå€ºæƒäººé¿å…è´¢åŠ¡é€ å‡å¸¦æ¥çš„æŸå¤±ã€‚',
        date: '2026-01-01',
        reads: '1,102',
        likes: '78',
        comments: '21',
        author: 'å®¡è®¡ä¸“å®¶ çŽ‹ç£Š',
        category: 'accounting',
        icon: 'ðŸ”'
      }
    ];
    
    this.setData({ 
      articles: articles,
      filteredArticles: articles,
      loading: false 
    });
    
    // å¦‚æžœæœ‰åˆ†ç±»å‚æ•°ï¼Œç­›é€‰æ–‡ç« 
    if (this.data.selectedCategory !== 'all') {
      this.filterArticles(this.data.selectedCategory);
    }
  },

  // ç­›é€‰æ–‡ç« 
  filterArticles(e) {
    // æ”¯æŒä¸¤ç§è°ƒç”¨æ–¹å¼ï¼šäº‹ä»¶å¯¹è±¡æˆ–ç›´æŽ¥çš„categoryId
    let categoryId;
    if (typeof e === 'object' && e.currentTarget) {
      categoryId = e.currentTarget.dataset.categoryId;
    } else {
      categoryId = e;
    }
    
    this.setData({ selectedCategory: categoryId });
    
    if (categoryId === 'all') {
      this.setData({ filteredArticles: this.data.articles });
    } else {
      const filtered = this.data.articles.filter(article => article.category === categoryId);
      this.setData({ filteredArticles: filtered });
    }
  },

  // é˜…è¯»æ–‡ç« 
  readArticle(e) {
    const articleId = e.currentTarget.dataset.id;
    wx.showToast({
      title: 'é˜…è¯»æ–‡ç« ',
      icon: 'success'
    });
    // è·³è½¬åˆ°æ–‡ç« è¯¦æƒ…é¡µ
    setTimeout(() => {
      wx.navigateTo({
        url: `/pages/business-education/article-detail?id=${articleId}`
      });
    }, 500);
  }
})