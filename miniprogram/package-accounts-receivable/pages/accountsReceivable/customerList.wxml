<!-- pages/accountsReceivable/customerList.wxml -->
<view class="container">
  <view class="header-section">
    <view class="header-title">å®¢æˆ·ç®¡ç†</view>
    <view class="header-actions">
      <button class="add-btn" type="primary" bindtap="addCustomer">
        <text class="add-icon">+</text>æ·»åŠ å®¢æˆ·
      </button>
    </view>
  </view>
  
  <!-- æœç´¢å’Œç­›é€‰åŒºåŸŸ -->
  <view class="filter-section">
    <view class="search-box">
      <icon class="search-icon" type="search" size="20"></icon>
      <input 
        class="search-input" 
        placeholder="æœç´¢å®¢æˆ·åç§°/ç¼–å·/è”ç³»äºº/ç”µè¯" 
        value="{{searchKeyword}}"
        bindinput="onSearchInput"
      />
    </view>
    <button class="filter-btn" bindtap="toggleFilter">
      <icon type="waiting" size="20"></icon>ç­›é€‰
    </button>
  </view>
  
  <!-- ç­›é€‰é¢æ¿ -->
  <view class="filter-panel" wx:if="{{showFilter}}">
    <view class="filter-item">
      <text class="filter-label">å®¢æˆ·çŠ¶æ€ï¼š</text>
      <radio-group class="filter-radio" bindchange="onStatusChange" value="{{selectedStatus}}">
        <radio value="all">å…¨éƒ¨</radio>
        <radio value="active">æ­£å¸¸</radio>
        <radio value="inactive">åœç”¨</radio>
      </radio-group>
    </view>
    <button class="reset-btn" bindtap="resetFilter">é‡ç½®ç­›é€‰</button>
  </view>
  
  <!-- å®¢æˆ·åˆ—è¡¨ -->
  <view class="list-section">
    <view class="empty" wx:if="{{filteredCustomers.length === 0}}">
      <text class="empty-text">æš‚æ— å®¢æˆ·æ•°æ®</text>
    </view>
    
    <view wx:for="{{filteredCustomers}}" wx:key="_id" class="customer-item">
      <view class="customer-header">
        <view class="customer-info">
          <view class="customer-code">{{item.code}}</view>
          <view class="customer-name">{{item.name}}</view>
        </view>
        <view class="customer-status" wx:if="{{item.status === 'active'}}" style="background-color: #c8e6c9;">æ­£å¸¸</view>
        <view class="customer-status" wx:else style="background-color: #ffcdd2;">åœç”¨</view>
      </view>
      
      <view class="customer-details">
        <view class="detail-item">
          <text class="detail-label">è”ç³»äººï¼š</text>
          <text class="detail-value">{{item.contact}}</text>
        </view>
        <view class="detail-item">
          <text class="detail-label">ç”µè¯ï¼š</text>
          <text class="detail-value">{{item.phone}}</text>
        </view>
        <view class="detail-item">
          <text class="detail-label">åœ°å€ï¼š</text>
          <text class="detail-value">{{item.address}}</text>
        </view>
        <view class="detail-item">
          <text class="detail-label">ä¿¡ç”¨é¢åº¦ï¼š</text>
          <text class="detail-value">Â¥{{item.creditLimit}}</text>
        </view>
      </view>
      
      <view class="customer-actions">
        <button class="edit-btn" bindtap="editCustomer" data-id="{{item._id}}">
          <text class="edit-icon">âœï¸</text>ç¼–è¾‘
        </button>
        <button class="delete-btn" bindtap="deleteCustomer" data-id="{{item._id}}">
          <text class="delete-icon">ğŸ—‘ï¸</text>åˆ é™¤
        </button>
      </view>
    </view>
  </view>
</view>
