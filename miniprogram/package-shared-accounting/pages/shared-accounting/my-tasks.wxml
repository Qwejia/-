<!-- æˆ‘çš„ä»»åŠ¡é¡µé¢ -->
<view class="container">
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <view class="nav-bar">
    <view class="nav-left" bindtap="onBack">
      <text class="nav-icon">â†</text>
    </view>
    <text class="nav-title">æˆ‘çš„ä»»åŠ¡</text>
    <view class="nav-right"></view>
  </view>
  
  <!-- ä»»åŠ¡ç­›é€‰ -->
  <view class="filter-section">
    <view class="filter-tabs">
      <view class="filter-tab {{activeFilter === 'all' ? 'active' : ''}}" bindtap="switchFilter" data-filter="all">
        <text class="filter-text">å…¨éƒ¨</text>
      </view>
      <view class="filter-tab {{activeFilter === 'pending' ? 'active' : ''}}" bindtap="switchFilter" data-filter="pending">
        <text class="filter-text">å¾…å¤„ç†</text>
      </view>
      <view class="filter-tab {{activeFilter === 'processing' ? 'active' : ''}}" bindtap="switchFilter" data-filter="processing">
        <text class="filter-text">å¤„ç†ä¸­</text>
      </view>
      <view class="filter-tab {{activeFilter === 'completed' ? 'active' : ''}}" bindtap="switchFilter" data-filter="completed">
        <text class="filter-text">å·²å®Œæˆ</text>
      </view>
      <view class="filter-tab {{activeFilter === 'cancelled' ? 'active' : ''}}" bindtap="switchFilter" data-filter="cancelled">
        <text class="filter-text">å·²å–æ¶ˆ</text>
      </view>
    </view>
  </view>
  
  <!-- ä»»åŠ¡åˆ—è¡¨ -->
  <view class="task-section">
    <view class="task-list">
      <view class="task-card" wx:for="{{filteredTasks}}" wx:key="id" bindtap="viewTaskDetail" data-id="{{item.id}}">
        <view class="task-header">
          <text class="task-title">{{item.title}}</text>
          <text class="task-status" style="color: {{getStatusColor(item.status)}}">{{getStatusText(item.status)}}</text>
        </view>
        <text class="task-description">{{item.description}}</text>
        <view class="task-meta">
          <view class="meta-item">
            <text class="meta-label">æœåŠ¡ç±»å‹ï¼š</text>
            <text class="meta-value">{{getServiceText(item.service)}}</text>
          </view>
          <view class="meta-item">
            <text class="meta-label">é¢„ç®—ï¼š</text>
            <text class="meta-value">{{getBudgetText(item.budget)}}</text>
          </view>
          <view class="meta-item">
            <text class="meta-label">æˆªæ­¢æ—¥æœŸï¼š</text>
            <text class="meta-value">{{item.deadline}}</text>
          </view>
          <view class="meta-item">
            <text class="meta-label">å‘å¸ƒæ—¥æœŸï¼š</text>
            <text class="meta-value">{{formatDate(item.createdAt)}}</text>
          </view>
        </view>
        <view class="task-actions" wx:if="item.status === 'pending'">
          <view class="action-btn cancel" bindtap="cancelTask" data-id="{{item.id}}">
            <text class="btn-text">å–æ¶ˆä»»åŠ¡</text>
          </view>
        </view>
        <view class="task-actions" wx:elif="item.status === 'processing'">
          <view class="action-btn complete" bindtap="completeTask" data-id="{{item.id}}">
            <text class="btn-text">æ ‡è®°å®Œæˆ</text>
          </view>
        </view>
        <view class="task-actions" wx:elif="item.status === 'completed'">
          <view class="action-btn review" bindtap="reviewTask" data-id="{{item.id}}">
            <text class="btn-text">è¯„ä»·æœåŠ¡</text>
          </view>
        </view>
      </view>
      
      <!-- ç©ºçŠ¶æ€ -->
      <view class="empty-state" wx:if="filteredTasks.length === 0">
        <text class="empty-icon">ğŸ“‹</text>
        <text class="empty-text">æš‚æ— ä»»åŠ¡è®°å½•</text>
        <view class="empty-action" bindtap="navigateToPostTask">
          <text class="action-text">å‘å¸ƒæ–°ä»»åŠ¡</text>
        </view>
      </view>
    </view>
  </view>
  
  <!-- åº•éƒ¨æ“ä½œæ  -->
  <view class="bottom-bar">
    <view class="bar-item" bindtap="navigateToPostTask">
      <text class="bar-icon">+</text>
      <text class="bar-text">å‘å¸ƒä»»åŠ¡</text>
    </view>
  </view>
</view>