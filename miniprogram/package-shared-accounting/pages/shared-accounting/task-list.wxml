<!-- ä»»åŠ¡åˆ—è¡¨é¡µé¢ -->
<view class="container">
  <!-- é¡µé¢å¤´éƒ¨ -->
  <view class="header">
    <view class="back-btn" bindtap="onBack">
      <text>â†</text>
    </view>
    <text class="title">ä»»åŠ¡åˆ—è¡¨</text>
    <view class="header-right">
      <text class="header-icon">ğŸ“‹</text>
    </view>
  </view>

  <!-- ä»»åŠ¡çŠ¶æ€ç­›é€‰ -->
  <view class="filter-section">
    <view class="filter-tabs">
      <view class="filter-tab {{activeFilter === 'all' ? 'active' : ''}}" bindtap="switchFilter" data-filter="all">
        <text class="tab-text">å…¨éƒ¨</text>
      </view>
      <view class="filter-tab {{activeFilter === 'pending' ? 'active' : ''}}" bindtap="switchFilter" data-filter="pending">
        <text class="tab-text">å¾…å¤„ç†</text>
      </view>
      <view class="filter-tab {{activeFilter === 'processing' ? 'active' : ''}}" bindtap="switchFilter" data-filter="processing">
        <text class="tab-text">å¤„ç†ä¸­</text>
      </view>
      <view class="filter-tab {{activeFilter === 'completed' ? 'active' : ''}}" bindtap="switchFilter" data-filter="completed">
        <text class="tab-text">å·²å®Œæˆ</text>
      </view>
    </view>
  </view>

  <!-- æœç´¢å’Œæ’åº -->
  <view class="search-sort-section">
    <!-- æœç´¢æ¡† -->
    <view class="search-box">
      <text class="search-icon">ğŸ”</text>
      <input class="search-input" placeholder="æœç´¢ä»»åŠ¡æ ‡é¢˜æˆ–æè¿°" value="{{searchKeyword}}" bindinput="onSearchInput" />
      <view class="clear-btn" wx:if="searchKeyword" bindtap="clearSearch">âœ•</view>
    </view>
    
    <!-- æ’åºé€‰é¡¹ -->
    <view class="sort-section">
      <text class="sort-label">æ’åºï¼š</text>
      <view class="sort-options">
        <view class="sort-option {{activeSort === 'createdAt' ? 'active' : ''}}" bindtap="switchSort" data-sort="createdAt">
          <text class="sort-text">å‘å¸ƒæ—¶é—´</text>
        </view>
        <view class="sort-option {{activeSort === 'deadline' ? 'active' : ''}}" bindtap="switchSort" data-sort="deadline">
          <text class="sort-text">æˆªæ­¢æ—¥æœŸ</text>
        </view>
        <view class="sort-option {{activeSort === 'budget' ? 'active' : ''}}" bindtap="switchSort" data-sort="budget">
          <text class="sort-text">é¢„ç®—</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ä»»åŠ¡åˆ—è¡¨ -->
  <view class="task-list-container">
    <view class="task-list" wx:if="filteredTasks.length > 0">
      <view class="task-card" wx:for="{{filteredTasks}}" wx:key="id" data-id="{{item.id}}">
        <view class="task-header">
          <text class="task-title">{{item.title}}</text>
          <view class="task-status" style="background: {{getStatusColor(item.status)}}">
            <text class="status-text">{{getStatusText(item.status)}}</text>
          </view>
        </view>
        <text class="task-description">{{item.description}}</text>
        <view class="task-meta">
          <view class="meta-item">
            <text class="meta-icon">ğŸ’¼</text>
            <text class="meta-text">{{getServiceText(item.service)}}</text>
          </view>
          <view class="meta-item">
            <text class="meta-icon">ğŸ’°</text>
            <text class="meta-text">{{getBudgetText(item.budget)}}</text>
          </view>
          <view class="meta-item">
            <text class="meta-icon">ğŸ“…</text>
            <text class="meta-text">{{item.deadline}}</text>
          </view>
        </view>
        <view class="task-footer">
          <text class="task-time">{{formatTime(item.createdAt)}}</text>
          <view class="task-actions">
            <view class="action-btn view" bindtap="viewTaskDetail" data-id="{{item.id}}">
              <text class="action-text">æŸ¥çœ‹è¯¦æƒ…</text>
            </view>
            <view class="action-btn cancel" bindtap="cancelTask" data-id="{{item.id}}" wx:if="item.status === 'pending'">
              <text class="action-text">å–æ¶ˆä»»åŠ¡</text>
            </view>
            <view class="action-btn complete" bindtap="completeTask" data-id="{{item.id}}" wx:if="item.status === 'processing'">
              <text class="action-text">ç¡®è®¤å®Œæˆ</text>
            </view>
          </view>
        </view>
      </view>
    </view>
    <view class="empty-state" wx:else>
      <view class="empty-icon">ğŸ“‹</view>
      <text class="empty-title">æš‚æ— ä»»åŠ¡</text>
      <text class="empty-subtitle">ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å‘å¸ƒæ–°ä»»åŠ¡</text>
    </view>
  </view>

  <!-- å‘å¸ƒä»»åŠ¡æŒ‰é’® -->
  <view class="post-task-section">
    <button class="post-task-btn" bindtap="navigateToPostTask">
      <text class="btn-icon">âœï¸</text>
      <text class="btn-text">å‘å¸ƒæ–°ä»»åŠ¡</text>
    </button>
  </view>


</view>