# AI在线功能配置指南

## 概述

本系统支持两种AI模式：
1. **本地知识库模式**：使用内置的财务知识库回答问题，无需网络连接
2. **在线AI模式**：调用火山引擎Ark API，提供更强大的AI分析能力

## 配置步骤

### 1. 获取API密钥

1. 访问火山引擎官网：https://www.volcengine.com/
2. 注册并登录账号
3. 进入控制台，开通Ark服务
4. 创建API密钥（API Key）

### 2. 配置API密钥

有两种配置方式：

#### 方式一：通过页面配置（推荐）

1. 打开小程序，进入"AI助手"页面
2. 点击右上角的🔑图标
3. 在弹出的对话框中输入您的API密钥
4. 点击确认

#### 方式二：修改配置文件

编辑 `miniprogram/config/cloud.js` 文件：

```javascript
ai: {
  apiKey: '您的API密钥',  // 在这里填入您的API密钥
  apiUrl: 'https://ark.cn-beijing.volces.com/api/v3/chat/completions',
  defaultModel: 'deepseek-v3-2-251201',
  parameters: {
    temperature: 0.7,
    max_tokens: 1000
  }
}
```

### 3. 切换AI模式

1. 点击AI助手页面右上角的🌐/📡图标
2. 🌐 表示在线AI模式
3. 📡 表示本地知识库模式

## 使用说明

### 在线AI模式

- 需要网络连接
- 需要配置有效的API密钥
- 提供更准确、更智能的回答
- 支持复杂的财务分析和建议

### 本地知识库模式

- 无需网络连接
- 无需API密钥
- 基于预设的财务知识库
- 回答速度快，但功能有限

## 功能特性

### AI财务助手

支持以下功能：
- 税务筹划建议
- 财务分析报告
- 风险预警
- 成本优化建议
- 现金流管理
- 预算管理
- 财务风险评估

### 快速提问

系统预设了常见财务问题，可快速提问：
- 如何计算增值税？
- 小微企业有哪些税收优惠？
- 如何优化企业成本？
- 如何提高企业利润率？
- 个人所得税如何申报？

### 工具集成

集成多种财务工具：
- 增值税计算器
- 企业所得税计算器
- 个人所得税计算器
- 税务筹划工具
- 风险预警工具

## 注意事项

1. **API密钥安全**：
   - 请妥善保管您的API密钥
   - 不要将API密钥泄露给他人
   - 建议定期更换API密钥

2. **网络要求**：
   - 在线AI模式需要稳定的网络连接
   - 建议使用WiFi或4G/5G网络

3. **费用说明**：
   - 火山引擎Ark API按使用量收费
   - 请关注您的API使用量和费用
   - 建议设置使用限额

4. **性能优化**：
   - 系统内置缓存机制
   - 相同问题会优先使用缓存
   - 可通过清空聊天记录清除缓存

## 故障排查

### 问题1：无法使用在线AI

**可能原因**：
- 未配置API密钥
- API密钥无效
- 网络连接异常
- API服务异常

**解决方法**：
1. 检查API密钥是否正确配置
2. 检查网络连接
3. 尝试切换到本地知识库模式
4. 查看控制台日志获取详细错误信息

### 问题2：AI响应慢

**可能原因**：
- 网络延迟
- API服务繁忙
- 请求内容过长

**解决方法**：
1. 检查网络连接
2. 简化提问内容
3. 使用本地知识库模式

### 问题3：AI回答不准确

**可能原因**：
- 问题表述不清晰
- 超出AI知识范围
- API模型限制

**解决方法**：
1. 重新表述问题
2. 使用快速提问功能
3. 查看工具页面中的专业功能

## 技术支持

如有问题，请联系技术支持团队。

## 更新日志

### v1.0.0 (2026-02-04)
- 初始版本
- 支持在线AI和本地知识库双模式
- 支持API密钥动态配置
- 集成多种财务工具
